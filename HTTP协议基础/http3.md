## HTTP/3
- 运行在QUIC之上的HTTP被称为http/3(HTTP over QUIC)
- QUIC协议（quick UDP Internect Connection）基于UDP协议，正是看中了UDP的速度与效率，同时QUIC也整合了TCP、TLS和HTTP/2的优点，并加以优化
- 特点
  - 减少了握手的延迟（1-RTT或者0-RTT）RTT（往返时间）
  - 多路复用，并且没有TCP阻塞问题
  - 连接迁移，（主要是在客户端），当由wifi转移到4g的时候，连接不会被断开
- HTTP3跟HTTP/1.1和HTTP/2没有直接的关系
### HTTP/3之QUIC


[好文章](https://blog.csdn.net/LuckyWinty/article/details/106678662)

#### ORTT建立连接
RTT（往返时间）
HTTP/3首次连接需要的时间是1RTT,后续传输只需要0RTT,意味着客户端发送给服务端的第一个包就带有请求数据

### 队首堵塞比较

> 就是需要排队，队首的事情没有处理完的时候，后面的人都要等着

http1.0的队首堵塞
> 对于同一个TCP连接，所有的http1.0请求放入队列中，只有一个请求的响应收到了，才会发送下一个请求，可见http1.0队首阻塞发生在客户端

http1.1的队首堵塞

> 对于同一个tcp连接，http1.1允许一次性发送多个http1.1请求，也就是说不必等前一个响应收到，就可以发送下一个请求，这样就解决了客户端的队首阻塞，但是http1.1规定，服务器端的响应的发送要根据请求被接收的顺序排队，也就是说，先接收到请求，响应也要先发送，如果最先收到的请求处理时间长，响应时间慢（或者请求发生丢失，需要重传），就会堵塞后面的请求，只能等待第四个请求处理完毕才能被处理

http2队首阻塞

 http/2每个请求都会被拆分成多个Frame(骨架)，然后不同的Frame组成不同的请求，Frame是TCP传输的单位，这样的话，HTTP/2就达到了一条连接同事发送多条请求的目标，这就是多路复用的原理。如果在一条TCP连接上同事发送了4个stream,其中Stream1已经正确送达，Stream2的第三个Frame丢失，TCP处理数据时有严格的前后顺序，先发送的要先被处理，这样就会让重传第三个Frame,Stream3和Stream4虽然说已经到了，但是不能被处理，那么这个时候这个键连接都会被堵塞

HTTP/2的多路虽然可以解决`请求`这个粒度的堵塞，但HTTP/2的基础TCP协议本身也存在着队首堵塞的问题

- 由于HTTP/2必须使用HTTPS,而 HTTPS 使用的 TLS 协议也存在队头阻塞问题。TLS 基于 Record 组织数据，将一堆数据放在一起（即一个 Record）加密，加密完后又拆分成多个 TCP 包传输。一般每个 Record 16K，包含 12 个 TCP 包，这样如果 12 个 TCP 包中有任何一个包丢失，那么整个 Record 都无法解密

- 队首阻塞会导致HTTP/2在更容易丢包的弱网络环境比HTTP/1.1更慢

QUIC解决队首堵塞的问题的方法
- QUIC的传输单位是Packet,加密单位也是Packet，整个加密传输，解密都基于Packet，这样就能避免TLS的队首堵塞问题
- QUIC基于UDP,UDP的数据包在接收端没有处理顺序，即使中间丢失了一个包，也不会堵塞整条连接，其他资源也能被正常处理